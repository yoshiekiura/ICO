const fs = require("fs");
//const solc = require('solc');
var Web3 = require('web3');
if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
} else {
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}
if (!web3.isConnected()) {
    console.error("Ethereum - no conection to RPC server");
} else {
    console.log("Ethereum - connected to RPC server");
}
web3.eth.getTransactionReceiptMined = require("./getTransactionReceiptMined.js");

const account = web3.eth.accounts[0];

// we only need the multi sig napoleonX wallet
var napoleonXMultiSigWalletAddress  = "0xf1565df2b02ac6d756a1a594b180d34ee3438be8";
// Date.now().getTime() to test
// be careful months start at 0
// var d = new Date(2017,08,29);
var d = new Date(2017,07,05);
var setStartTime = d.getTime();

var napoleonxcrowdsaleAbi = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"greenlistTotalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"investedAmountOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MIN_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEndTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"endTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_startTime","type":"uint256"}],"name":"setStartTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"weiRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_GREENLIST_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"tokensSold","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"halt","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_OWNABLE_TOKEN_FRACTION_NUMERATOR","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MAX_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"FOUNDER_ALLOCATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"bountyPercentage","type":"uint256"}],"name":"allocateBountyTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committer","type":"address"},{"name":"value","type":"uint256"}],"name":"registerCommitment","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocationInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"halted","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allocateFounderTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committers","type":"address[]"},{"name":"values","type":"uint256[]"}],"name":"populateExistingGreenList","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"transferLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"GREENLIST_DISCOUNT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"unhalt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_endTime","type":"uint256"}],"name":"setEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_presaleEndTime","type":"uint256"}],"name":"setPresaleEndTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discountInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ONE_NPX_TOKEN_PRICE","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getICOStage","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_OWNABLE_TOKEN_FRACTION_DENOMINATOR","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_committer","type":"address"}],"name":"commitmentOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"safeWithdrawal","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"_napoleonXMultiSigWallet","type":"address"},{"name":"setStartTime","type":"uint256"}],"payable":false,"type":"constructor"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"Buy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"eth","type":"uint256"}],"name":"Withdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateFounderTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateBountyTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"investor","type":"address"},{"indexed":false,"name":"weiAmount","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
var napoleonxcrowdsaleByteCode = '0x606060405260006005556000600655736551f97f7d133083b11c0350c5fa83eefee8000d600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506249d4006010556293a8006011556293a8006012556000601360006101000a81548160ff0219169083151502179055506000601360016101000a81548160ff0219169083151502179055506000601360026101000a81548160ff02191690831515021790555034156101d357600080fd5b604051604080612a21833981016040528080519060200190919080519060200190919050505b33600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600d8190555062093a80600d5401600f819055506224ea0062093a80600d540101600e819055505b50505b61276b806102b66000396000f30060606040523615610223576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde0314610660578063095ea7b3146106ef57806318160ddd1461074957806319800d1b146107725780631aae34601461079b5780631bc59aa6146107e857806323b872dd146108155780632439a4f61461088e578063249b7c19146108b7578063313ce567146108e05780633197cbb6146109095780633e0a322d146109325780634042b66f1461095557806344e026091461097e578063518ab2a8146109a75780635ed7ca5b146109d057806370a08231146109e557806370dbe91b14610a3257806378e9792514610a5b57806383e811a614610a845780638bf86b8014610aad578063943762d114610ad657806394d32a5d14610aff57806395d89b4114610b2857806399d22e4814610bb75780639c6bdcb514610be45780639f19bc2f14610c07578063a9059cbb14610c49578063b7c6566814610ca3578063b9b8af0b14610ccc578063bcfcb03e14610cf9578063c12f83c514610d0e578063c24fe21b14610da8578063c2e1d45514610dd1578063cb3e64fd14610dfa578063ccb98ffc14610e0f578063cfa0136f14610e32578063d2e9c4a514610e55578063dbe7e6f414610e7e578063dd62ed3e14610ea7578063e2646a9f14610f13578063e9d8d3d714610fa2578063ea8d738c14610fcb578063f662b88114610ff4578063fd6b7ef814611041575b5b6000806000806000806000806000806000600d5480421015151561024757600080fd5b600e54804210151561025857600080fd5b601360009054906101000a900460ff1615151561027457600080fd5b6934f086f3b33b6840000061028b60065434611056565b1115151561029857600080fd5b349c50601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b506102e633611081565b9a506002600a0a9950670de0b6b3a76400008a8e0281151561030457fe5b049850600a8a60010281151561031657fe5b049750610325888a10156110cb565b600f544210156104265760008b141561033d57600080fd5b6103478c8e611056565b96508a87101580156103685750600a8b600f0281151561036357fe5b048711155b1561038357606460146064018a0281151561037f57fe5b0498505b600a8b600f0281151561039257fe5b0487111561042557600a8b600f028115156103a957fe5b048c111515610424576103cb600a8c600f028115156103c457fe5b048d6110db565b95506103d78d876110db565b9450670de0b6b3a76400008a87028115156103ee57fe5b049350670de0b6b3a76400008a860281151561040657fe5b04925060646014606401850281151561041b57fe5b04935083830198505b5b5b600f544210151561044d57606461043b6110f5565b6064018a0281151561044957fe5b0498505b6104956000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548a611056565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506104e36002548a611056565b600281905550600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168d60405160006040518083038185876187965a03f192505050151561054657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e8b604051808381526020018281526020019250505060405180910390a26105e5601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e611056565b601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506106346006548e611056565b6006819055506106466005548a611056565b6005819055505b5b5b5b505b505050505050505050505050005b341561066b57600080fd5b6106736111ce565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156106b45780820151818401525b602081019050610698565b50505050905090810190601f1680156106e15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156106fa57600080fd5b61072f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611207565b604051808215151515815260200191505060405180910390f35b341561075457600080fd5b61075c6112fa565b6040518082815260200191505060405180910390f35b341561077d57600080fd5b610785611300565b6040518082815260200191505060405180910390f35b34156107a657600080fd5b6107d2600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611306565b6040518082815260200191505060405180910390f35b34156107f357600080fd5b6107fb61131e565b604051808215151515815260200191505060405180910390f35b341561082057600080fd5b610874600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611331565b604051808215151515815260200191505060405180910390f35b341561089957600080fd5b6108a161135c565b6040518082815260200191505060405180910390f35b34156108c257600080fd5b6108ca61136a565b6040518082815260200191505060405180910390f35b34156108eb57600080fd5b6108f3611370565b6040518082815260200191505060405180910390f35b341561091457600080fd5b61091c611375565b6040518082815260200191505060405180910390f35b341561093d57600080fd5b610953600480803590602001909190505061137b565b005b341561096057600080fd5b610968611386565b6040518082815260200191505060405180910390f35b341561098957600080fd5b61099161138c565b6040518082815260200191505060405180910390f35b34156109b257600080fd5b6109ba611393565b6040518082815260200191505060405180910390f35b34156109db57600080fd5b6109e3611399565b005b34156109f057600080fd5b610a1c600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611414565b6040518082815260200191505060405180910390f35b3415610a3d57600080fd5b610a4561145d565b6040518082815260200191505060405180910390f35b3415610a6657600080fd5b610a6e611463565b6040518082815260200191505060405180910390f35b3415610a8f57600080fd5b610a97611469565b6040518082815260200191505060405180910390f35b3415610ab857600080fd5b610ac061146f565b6040518082815260200191505060405180910390f35b3415610ae157600080fd5b610ae9611474565b6040518082815260200191505060405180910390f35b3415610b0a57600080fd5b610b12611482565b6040518082815260200191505060405180910390f35b3415610b3357600080fd5b610b3b611487565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610b7c5780820151818401525b602081019050610b60565b50505050905090810190601f168015610ba95780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3415610bc257600080fd5b610bca6114c0565b604051808215151515815260200191505060405180910390f35b3415610bef57600080fd5b610c0560048080359060200190919050506114d3565b005b3415610c1257600080fd5b610c47600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611998565b005b3415610c5457600080fd5b610c89600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611a4a565b604051808215151515815260200191505060405180910390f35b3415610cae57600080fd5b610cb6611a73565b6040518082815260200191505060405180910390f35b3415610cd757600080fd5b610cdf611ae6565b604051808215151515815260200191505060405180910390f35b3415610d0457600080fd5b610d0c611af9565b005b3415610d1957600080fd5b610da660048080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050611ce2565b005b3415610db357600080fd5b610dbb611db5565b6040518082815260200191505060405180910390f35b3415610ddc57600080fd5b610de4611dbb565b6040518082815260200191505060405180910390f35b3415610e0557600080fd5b610e0d611dc0565b005b3415610e1a57600080fd5b610e306004808035906020019091905050611e3b565b005b3415610e3d57600080fd5b610e536004808035906020019091905050611e46565b005b3415610e6057600080fd5b610e686110f5565b6040518082815260200191505060405180910390f35b3415610e8957600080fd5b610e91611e51565b6040518082815260200191505060405180910390f35b3415610eb257600080fd5b610efd600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611e5d565b6040518082815260200191505060405180910390f35b3415610f1e57600080fd5b610f26611ee5565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610f675780820151818401525b602081019050610f4b565b50505050905090810190601f168015610f945780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3415610fad57600080fd5b610fb5612035565b6040518082815260200191505060405180910390f35b3415610fd657600080fd5b610fde61203c565b6040518082815260200191505060405180910390f35b3415610fff57600080fd5b61102b600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611081565b6040518082815260200191505060405180910390f35b341561104c57600080fd5b611054612041565b005b60008082840190506110768482101580156110715750838210155b6110cb565b8091505b5092915050565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b8015156110d757600080fd5b5b50565b60006110e9838311156110cb565b81830390505b92915050565b600080600d5442108061110a5750600e544210155b1561111a5761111960006110cb565b5b601490504262015180600d5401108061113e5750690878678326eac9000000600654115b1561114857600f90505b426201fa40600d540110806111685750690cb49b44ba602d800000600654115b1561117257600a90505b426202a300600d5401108061119257506910f0cf064dd592000000600654115b1561119c57600590505b426203f480600d540110806111bc575069152d02c7e14af6800000600654115b156111c657600090505b8091505b5090565b6040805190810160405280600f81526020017f4e61706f6c656f6e5820546f6b656e000000000000000000000000000000000081525081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b60045481565b60146020528060005260406000206000915090505481565b601360029054906101000a900460ff1681565b6000601054600e54014211151561134757600080fd5b611352848484612238565b90505b9392505050565b69054b40b1f852bda0000081565b600f5481565b600281565b600e5481565b80600d819055505b50565b60065481565b62093a8081565b60055481565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113f557600080fd5b6001601360006101000a81548160ff0219169083151502179055505b5b565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b60125481565b600d5481565b60115481565b600181565b6934f086f3b33b6840000081565b601481565b6040805190810160405280600381526020017f4e5058000000000000000000000000000000000000000000000000000000000081525081565b601360019054906101000a900460ff1681565b6000600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561153157600080fd5b601254600e54014211151561154557600080fd5b601360029054906101000a900460ff161561155f57600080fd5b6064826002540281151561156f57fe5b0490506115e8600080600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546004838115156115e257fe5b04611056565b600080600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061166460025460048381151561165e57fe5b04611056565b6002819055506116e0600080600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546004838115156116da57fe5b04611056565b600080600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061175c60025460048381151561175657fe5b04611056565b6002819055506117d8600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546004838115156117d257fe5b04611056565b600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061185460025460048381151561184e57fe5b04611056565b6002819055506118d0600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546004838115156118ca57fe5b04611056565b600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001601360026101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167fdd56998c270d613b449ef9fc57334482404fda530366a65772674a9da84da20860405160405180910390a25b5b5050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506119e860045483611056565b6004819055506119fa600454826110db565b60048190555081600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505050565b6000601054600e540142111515611a6057600080fd5b611a6a8383612533565b90505b92915050565b600080600f9050690878678326eac90000006006541115611a9357600a90505b690cb49b44ba602d8000006006541115611aac57600890505b6910f0cf064dd5920000006006541115611ac557600590505b69152d02c7e14af68000006006541115611ade57600390505b8091505b5090565b601360009054906101000a900460ff1681565b6000600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611b5757600080fd5b601154600e540142111515611b6b57600080fd5b601360019054906101000a900460ff1615611b8557600080fd5b6064611b8f611a73565b60025402811515611b9c57fe5b049050611c09600080600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611056565b600080600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611c7960025482611056565b6002819055506001601360016101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f1c8a3821e439862f28669f7fbc210e74e947ebf0e947b591cc5a02e41003026560405160405180910390a25b5b50565b6000600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611d4057600080fd5b8282611d4c828261271b565b1515611d5757600080fd5b600092505b8451831015611dab57611d9d8584815181101515611d7657fe5b906020019060200201518585815181101515611d8e57fe5b90602001906020020151611998565b5b8280600101935050611d5c565b5b5b50505b505050565b60105481565b601481565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611e1c57600080fd5b6000601360006101000a81548160ff0219169083151502179055505b5b565b80600e819055505b50565b80600f819055505b50565b670de0b6b3a764000081565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b92915050565b611eed61272b565b600d54421015611f34576040805190810160405280600981526020017f4e6f7420626567756e00000000000000000000000000000000000000000000008152509050612032565b600f54421015611f7b576040805190810160405280600f81526020017f50726573616c652072756e6e696e6700000000000000000000000000000000008152509050612032565b600e54421015611fe957606060405190810160405280602381526020017f50726573616c6520656e6465642c207374616e646172642049434f2072756e6e81526020017f696e6700000000000000000000000000000000000000000000000000000000008152509050612032565b600e5442101515612031576040805190810160405280600c81526020017f49434f2066696e697368656400000000000000000000000000000000000000008152509050612032565b5b90565b6224ea0081565b600a81565b600080600e5480421015151561205657600080fd5b69054b40b1f852bda00000600654101592508215156121f057601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205491506000601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060008211156121ef573373ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050156121a9577fbb28353e4598c3b9199101a66e0989549b659a59a54d2c27fbb183f1932c8e6d3383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16121ee565b81601460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b5b821561223157600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b5b505050565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612304575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410155b801561238d57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b1561252257816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905061252c565b6000905061252c565b5b9392505050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015801561260057506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b1561270b57816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612715565b60009050612715565b5b92915050565b6000815183511490505b92915050565b6020604051908101604052806000815250905600a165627a7a723058204e953086db7b8d3874c9da08e73622a8b2b445751928f71c07b119fda11743710029';

let napoleonxcrowdsaleGasEstimate = web3.eth.estimateGas({
    data: napoleonxcrowdsaleByteCode
});

console.log(napoleonxcrowdsaleGasEstimate);
web3.personal.unlockAccount(account,unlockingPassword, 1000);
console.log(account);

var napoleonxcrowdsaleContract = web3.eth.contract(napoleonxcrowdsaleAbi);
var napoleonxcrowdsaleContractInstance = napoleonxcrowdsaleContract.new(
   napoleonXMultiSigWalletAddress,
   setStartTime,
   {
     from : account,
     data : napoleonxcrowdsaleByteCode,
     gas :  napoleonxcrowdsaleGasEstimate+1000000
   }, function (err, myContract){
    if (!err) {
        // NOTE: The callback will fire twice!
        // Once the contract has the transactionHash property set and once its deployed on an address.

        // e.g. check tx hash on the first call (transaction send)
        if (!myContract.address) {
            console.log("TransactionHash")
            console.log(myContract.transactionHash) // The hash of the transaction, which deploys the contract

            // check address on the second call (contract deployed)
        } else {
            console.log("Contract deployed at :"+myContract.address);
            //console.log(myContract.address) // the contract address
            //exports.contractAddress = myContract.address;
        }

        // Note that the returned "myContractReturned" === "myContract",
        // so the returned "myContractReturned" object will also get the address set.
    }
    else{
      console.log(err);
    }
 });


var MyReceipt = web3.eth.getTransactionReceiptMined(napoleonxcrowdsaleContractInstance.transactionHash);

// Transaction has entered to geth memory pool
console.log("Your contract is being deployed in transaction at http://ropsten.etherscan.io/tx/" + napoleonxcrowdsaleContractInstance.transactionHash);
