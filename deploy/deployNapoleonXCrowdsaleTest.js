const fs = require("fs");
//const solc = require('solc');
var Web3 = require('web3');
if (typeof web3 !== 'undefined') {
    web3 = new Web3(web3.currentProvider);
} else {
    web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}
if (!web3.isConnected()) {
    console.error("Ethereum - no conection to RPC server");
} else {
    console.log("Ethereum - connected to RPC server");
}
web3.eth.getTransactionReceiptMined = require("./getTransactionReceiptMined.js");

const account = web3.eth.accounts[0];
web3.personal.unlockAccount(account,unlockingPassword,1000);
// we only need the multi sig napoleonX wallet
var napoleonXMultiSigWalletAddress  = "0xf1565df2b02ac6d756a1a594b180d34ee3438be8";
// Date.now().getTime() to test
// be careful months start at 0
// var d = new Date(2017,08,29);
var d = new Date(2017,07,05);
var setStartTime = d.getTime()/1000;

var napoleonxcrowdsaleAbi = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MIN_TOKEN_AMOUNT_INVESTMENT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"greenlistTotalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"investedAmountOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MIN_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEndTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"endTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_startTime","type":"uint256"}],"name":"setStartTime","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"weiRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleEtherRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_GREENLIST_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"halt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"min_cap","type":"uint256"},{"name":"max_cap","type":"uint256"}],"name":"setTestingCap","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"bountyLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"startTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"getBackEtherTest","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"newFounder","type":"address"}],"name":"changeFounder","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ETHER_MAX_CAP","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"FOUNDER_ALLOCATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"bountyPercentage","type":"uint256"}],"name":"allocateBountyTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committer","type":"address"},{"name":"value","type":"uint256"}],"name":"registerCommitment","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"founderAllocationInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"halted","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allocateFounderTokens","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"committers","type":"address[]"},{"name":"values","type":"uint256[]"}],"name":"populateExistingGreenList","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"transferLockup","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"GREENLIST_DISCOUNT","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"presaleTokenSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"unhalt","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_endTime","type":"uint256"}],"name":"setEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_presaleEndTime","type":"uint256"}],"name":"setPresaleEndTime","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"buyTokens","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"discountInPercent","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ONE_NPX_TOKEN_PRICE","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getICOStage","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"MAX_CONTRIBUTION_DURATION","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_committer","type":"address"}],"name":"commitmentOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"safeWithdrawal","outputs":[],"payable":false,"type":"function"},{"inputs":[{"name":"_napoleonXMultiSigWallet","type":"address"},{"name":"setStartTime","type":"uint256"}],"payable":false,"type":"constructor"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"Buy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"eth","type":"uint256"},{"indexed":false,"name":"fbt","type":"uint256"}],"name":"PresaleBuy","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":false,"name":"to","type":"address"},{"indexed":false,"name":"eth","type":"uint256"}],"name":"Withdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateFounderTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"}],"name":"AllocateBountyTokens","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"investor","type":"address"},{"indexed":false,"name":"weiAmount","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];
var napoleonxcrowdsaleByteCode ='0x606060405260006005556000600655600060075569054b40b1f852bda000006008556934f086f3b33b68400000600955736551f97f7d133083b11c0350c5fa83eefee8000d600c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600d60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600e60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550736551f97f7d133083b11c0350c5fa83eefee8000d600f60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506249d4006013556293a8006014556293a8006015556000601660006101000a81548160ff0219169083151502179055506000601660016101000a81548160ff0219169083151502179055506000601660026101000a81548160ff02191690831515021790555034156101f457600080fd5b6040516040806132fb833981016040528080519060200190919080519060200190919050505b33600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060108190555062093a80601054016012819055506224ea0062093a8060105401016011819055505b50505b613024806102d76000396000f3006060604052361561024f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde031461071d578063095ea7b3146107ac57806318160ddd14610806578063193b80421461082f57806319800d1b146108585780631aae3460146108815780631bc59aa6146108ce57806323b872dd146108fb5780632439a4f614610974578063249b7c191461099d578063313ce567146109c65780633197cbb6146109ef5780633e0a322d14610a185780634042b66f14610a3b57806344b4995814610a6457806344e0260914610a8d5780635ed7ca5b14610ab65780636c04ffbc14610acb57806370a0823114610af757806370dbe91b14610b4457806378e9792514610b6d57806382846e8414610b9657806383e811a614610bab57806393c32e0614610bd4578063943762d114610c0d57806394d32a5d14610c3657806395d89b4114610c5f57806399d22e4814610cee5780639c6bdcb514610d1b5780639f19bc2f14610d3e578063a9059cbb14610d80578063b7c6566814610dda578063b9b8af0b14610e03578063bcfcb03e14610e30578063c12f83c514610e45578063c24fe21b14610edf578063c2e1d45514610f08578063c4fc3a3b14610f31578063cb3e64fd14610f5a578063ccb98ffc14610f6f578063cfa0136f14610f92578063d0febe4c14610fb5578063d2e9c4a514610fbf578063dbe7e6f414610fe8578063dd62ed3e14611011578063e2646a9f1461107d578063e9d8d3d71461110c578063f662b88114611135578063fd6b7ef814611182575b5b600080600080600080600080600080600060105480421015151561027357600080fd5b601154804210151561028457600080fd5b601660009054906101000a900460ff161515156102a057600080fd5b6009546102af60055434611197565b111515156102bc57600080fd5b349c50601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b5061030a336111c2565b9a5060125442101561053d576103208c8e611197565b9950662386f26fc100008a81151561033457fe5b04985060008b141561034557600080fd5b8a8a101580156103645750600a8b600f0281151561035f57fe5b048a11155b1561037f57606460146064018a0281151561037b57fe5b0498505b600a8b600f0281151561038e57fe5b048a111561040857600a8b600f028115156103a557fe5b0497506103c18a600a8d600f028115156103bb57fe5b0461120c565b9650662386f26fc10000888115156103d557fe5b049550662386f26fc10000878115156103ea57fe5b0494506064601460640187028115156103ff57fe5b04955085850198505b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549350886000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506104986006548561120c565b6006819055506104aa6006548a611197565b6006819055506104bc6002548561120c565b6002819055506104ce6002548a611197565b6002819055506104e06007548e611197565b6007819055503373ffffffffffffffffffffffffffffffffffffffff167fb77d41b776d1d5cc75b500402614335da616afa8aa95b49325e22db7f1ca86cc8b8b604051808381526020018281526020019250505060405180910390a25b6012544210151561066b57662386f26fc100008d81151561055a57fe5b0492506064610567611226565b606401840281151561057557fe5b0492506105c06000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205484611197565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061060e60025484611197565b6002819055503373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e85604051808381526020018281526020019250505060405180910390a25b6106b4601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e611197565b601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506107036005548e611197565b6005819055505b5b5b5b505b505050505050505050505050005b341561072857600080fd5b6107306112ff565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156107715780820151818401525b602081019050610755565b50505050905090810190601f16801561079e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156107b757600080fd5b6107ec600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611338565b604051808215151515815260200191505060405180910390f35b341561081157600080fd5b61081961142b565b6040518082815260200191505060405180910390f35b341561083a57600080fd5b610842611431565b6040518082815260200191505060405180910390f35b341561086357600080fd5b61086b611436565b6040518082815260200191505060405180910390f35b341561088c57600080fd5b6108b8600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061143c565b6040518082815260200191505060405180910390f35b34156108d957600080fd5b6108e1611454565b604051808215151515815260200191505060405180910390f35b341561090657600080fd5b61095a600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611467565b604051808215151515815260200191505060405180910390f35b341561097f57600080fd5b610987611492565b6040518082815260200191505060405180910390f35b34156109a857600080fd5b6109b0611498565b6040518082815260200191505060405180910390f35b34156109d157600080fd5b6109d961149e565b6040518082815260200191505060405180910390f35b34156109fa57600080fd5b610a026114a3565b6040518082815260200191505060405180910390f35b3415610a2357600080fd5b610a3960048080359060200190919050506114a9565b005b3415610a4657600080fd5b610a4e611511565b6040518082815260200191505060405180910390f35b3415610a6f57600080fd5b610a77611517565b6040518082815260200191505060405180910390f35b3415610a9857600080fd5b610aa061151d565b6040518082815260200191505060405180910390f35b3415610ac157600080fd5b610ac9611524565b005b3415610ad657600080fd5b610af5600480803590602001909190803590602001909190505061159f565b005b3415610b0257600080fd5b610b2e600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061160f565b6040518082815260200191505060405180910390f35b3415610b4f57600080fd5b610b57611658565b6040518082815260200191505060405180910390f35b3415610b7857600080fd5b610b8061165e565b6040518082815260200191505060405180910390f35b3415610ba157600080fd5b610ba9611664565b005b3415610bb657600080fd5b610bbe6116fe565b6040518082815260200191505060405180910390f35b3415610bdf57600080fd5b610c0b600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611704565b005b3415610c1857600080fd5b610c206117a6565b6040518082815260200191505060405180910390f35b3415610c4157600080fd5b610c496117ac565b6040518082815260200191505060405180910390f35b3415610c6a57600080fd5b610c726117b1565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610cb35780820151818401525b602081019050610c97565b50505050905090810190601f168015610ce05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3415610cf957600080fd5b610d016117ea565b604051808215151515815260200191505060405180910390f35b3415610d2657600080fd5b610d3c60048080359060200190919050506117fd565b005b3415610d4957600080fd5b610d7e600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611cc2565b005b3415610d8b57600080fd5b610dc0600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611d74565b604051808215151515815260200191505060405180910390f35b3415610de557600080fd5b610ded611d9d565b6040518082815260200191505060405180910390f35b3415610e0e57600080fd5b610e16611e10565b604051808215151515815260200191505060405180910390f35b3415610e3b57600080fd5b610e43611e23565b005b3415610e5057600080fd5b610edd6004808035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190505061200c565b005b3415610eea57600080fd5b610ef26120df565b6040518082815260200191505060405180910390f35b3415610f1357600080fd5b610f1b6120e5565b6040518082815260200191505060405180910390f35b3415610f3c57600080fd5b610f446120ea565b6040518082815260200191505060405180910390f35b3415610f6557600080fd5b610f6d6120f0565b005b3415610f7a57600080fd5b610f90600480803590602001909190505061216b565b005b3415610f9d57600080fd5b610fb360048080359060200190919050506121d3565b005b610fbd61223b565b005b3415610fca57600080fd5b610fd2611226565b6040518082815260200191505060405180910390f35b3415610ff357600080fd5b610ffb612708565b6040518082815260200191505060405180910390f35b341561101c57600080fd5b611067600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050612713565b6040518082815260200191505060405180910390f35b341561108857600080fd5b61109061279b565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156110d15780820151818401525b6020810190506110b5565b50505050905090810190601f1680156110fe5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561111757600080fd5b61111f6128eb565b6040518082815260200191505060405180910390f35b341561114057600080fd5b61116c600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506111c2565b6040518082815260200191505060405180910390f35b341561118d57600080fd5b6111956128f2565b005b60008082840190506111b78482101580156111b25750838210155b612ae1565b8091505b5092915050565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b600061121a83831115612ae1565b81830390505b92915050565b60008060105442108061123b57506011544210155b1561124b5761124a6000612ae1565b5b60149050426201518060105401108061126f5750690878678326eac9000000600554115b1561127957600f90505b426201fa406010540110806112995750690cb49b44ba602d800000600554115b156112a357600a90505b426202a3006010540110806112c357506910f0cf064dd592000000600554115b156112cd57600590505b426203f4806010540110806112ed575069152d02c7e14af6800000600554115b156112f757600090505b8091505b5090565b6040805190810160405280600f81526020017f4e61706f6c656f6e5820546f6b656e000000000000000000000000000000000081525081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b600a81565b60045481565b60176020528060005260406000206000915090505481565b601660029054906101000a900460ff1681565b6000601354601154014211151561147d57600080fd5b611488848484612af1565b90505b9392505050565b60085481565b60125481565b600081565b60115481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561150557600080fd5b806010819055505b5b50565b60055481565b60075481565b62093a8081565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561158057600080fd5b6001601660006101000a81548160ff0219169083151502179055505b5b565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156115fb57600080fd5b81600881905550806009819055505b5b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b60155481565b60105481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156116c057600080fd5b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60145481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561176057600080fd5b80600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b60095481565b601481565b6040805190810160405280600381526020017f4e5058000000000000000000000000000000000000000000000000000000000081525081565b601660019054906101000a900460ff1681565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561185b57600080fd5b601554601154014211151561186f57600080fd5b601660029054906101000a900460ff161561188957600080fd5b6064826002540281151561189957fe5b049050611912600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205460048381151561190c57fe5b04611197565b600080600c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061198e60025460048381151561198857fe5b04611197565b600281905550611a0a600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611a0457fe5b04611197565b600080600d60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611a86600254600483811515611a8057fe5b04611197565b600281905550611b02600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611afc57fe5b04611197565b600080600e60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611b7e600254600483811515611b7857fe5b04611197565b600281905550611bfa600080600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600483811515611bf457fe5b04611197565b600080600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001601660026101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167fdd56998c270d613b449ef9fc57334482404fda530366a65772674a9da84da20860405160405180910390a25b5b5050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050611d1260045483611197565b600481905550611d246004548261120c565b60048190555081600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505050565b60006013546011540142111515611d8a57600080fd5b611d948383612dec565b90505b92915050565b600080600f9050690878678326eac90000006005541115611dbd57600a90505b690cb49b44ba602d8000006005541115611dd657600890505b6910f0cf064dd5920000006005541115611def57600590505b69152d02c7e14af68000006005541115611e0857600390505b8091505b5090565b601660009054906101000a900460ff1681565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611e8157600080fd5b6014546011540142111515611e9557600080fd5b601660019054906101000a900460ff1615611eaf57600080fd5b6064611eb9611d9d565b60025402811515611ec657fe5b049050611f33600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482611197565b600080600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611fa360025482611197565b6002819055506001601660016101000a81548160ff0219169083151502179055503373ffffffffffffffffffffffffffffffffffffffff167f1c8a3821e439862f28669f7fbc210e74e947ebf0e947b591cc5a02e41003026560405160405180910390a25b5b50565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561206a57600080fd5b82826120768282612fd4565b151561208157600080fd5b600092505b84518310156120d5576120c785848151811015156120a057fe5b9060200190602002015185858151811015156120b857fe5b90602001906020020151611cc2565b5b8280600101935050612086565b5b5b50505b505050565b60135481565b601481565b60065481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561214c57600080fd5b6000601660006101000a81548160ff0219169083151502179055505b5b565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156121c757600080fd5b806011819055505b5b50565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561222f57600080fd5b806012819055505b5b50565b600080600080600080600080600080600060105480421015151561225e57600080fd5b601154804210151561226f57600080fd5b601660009054906101000a900460ff1615151561228b57600080fd5b60095461229a60055434611197565b111515156122a757600080fd5b349c50601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549b506122f5336111c2565b9a506012544210156125285761230b8c8e611197565b9950662386f26fc100008a81151561231f57fe5b04985060008b141561233057600080fd5b8a8a1015801561234f5750600a8b600f0281151561234a57fe5b048a11155b1561236a57606460146064018a0281151561236657fe5b0498505b600a8b600f0281151561237957fe5b048a11156123f357600a8b600f0281151561239057fe5b0497506123ac8a600a8d600f028115156123a657fe5b0461120c565b9650662386f26fc10000888115156123c057fe5b049550662386f26fc10000878115156123d557fe5b0494506064601460640187028115156123ea57fe5b04955085850198505b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549350886000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506124836006548561120c565b6006819055506124956006548a611197565b6006819055506124a76002548561120c565b6002819055506124b96002548a611197565b6002819055506124cb6007548e611197565b6007819055503373ffffffffffffffffffffffffffffffffffffffff167fb77d41b776d1d5cc75b500402614335da616afa8aa95b49325e22db7f1ca86cc8b8b604051808381526020018281526020019250505060405180910390a25b6012544210151561265657662386f26fc100008d81151561254557fe5b0492506064612552611226565b606401840281151561256057fe5b0492506125ab6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205484611197565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506125f960025484611197565b6002819055503373ffffffffffffffffffffffffffffffffffffffff167f1cbc5ab135991bd2b6a4b034a04aa2aa086dac1371cb9b16b8b5e2ed6b036bed8e85604051808381526020018281526020019250505060405180910390a25b61269f601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548e611197565b601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506126ee6005548e611197565b6005819055505b5b5b5b505b505050505050505050505050565b662386f26fc1000081565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b92915050565b6127a3612fe4565b6010544210156127ea576040805190810160405280600981526020017f4e6f7420626567756e000000000000000000000000000000000000000000000081525090506128e8565b601254421015612831576040805190810160405280600f81526020017f50726573616c652072756e6e696e67000000000000000000000000000000000081525090506128e8565b60115442101561289f57606060405190810160405280602381526020017f50726573616c6520656e6465642c207374616e646172642049434f2072756e6e81526020017f696e67000000000000000000000000000000000000000000000000000000000081525090506128e8565b601154421015156128e7576040805190810160405280600c81526020017f49434f2066696e6973686564000000000000000000000000000000000000000081525090506128e8565b5b90565b6224ea0081565b60008060115480421015151561290757600080fd5b60085460055410159250821515612a9957601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205491506000601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000821115612a98573373ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f1935050505015612a52577fbb28353e4598c3b9199101a66e0989549b659a59a54d2c27fbb183f1932c8e6d3383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1612a97565b81601760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b5b8215612ada57600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b5b505050565b801515612aed57600080fd5b5b50565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612bbd575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410155b8015612c4657506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15612ddb57816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612de5565b60009050612de5565b5b9392505050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015612eb957506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15612fc457816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050612fce565b60009050612fce565b5b92915050565b6000815183511490505b92915050565b6020604051908101604052806000815250905600a165627a7a72305820720e07c0312e590b4b189ea4a1d494cab6867c7d38213b43a50ab8a512c749a20029';


let napoleonxcrowdsaleGasEstimate = web3.eth.estimateGas({
    data: napoleonxcrowdsaleByteCode
});

console.log(napoleonxcrowdsaleGasEstimate);
web3.personal.unlockAccount(account,unlockingPassword, 1000);
console.log(account);

var napoleonxcrowdsaleContract = web3.eth.contract(napoleonxcrowdsaleAbi);
var napoleonxcrowdsaleContractInstance = napoleonxcrowdsaleContract.new(
   napoleonXMultiSigWalletAddress,
   setStartTime,
   {
     from : account,
     data : napoleonxcrowdsaleByteCode,
     gas :  napoleonxcrowdsaleGasEstimate+1000000
   }, function (err, myContract){
    if (!err) {
        // NOTE: The callback will fire twice!
        // Once the contract has the transactionHash property set and once its deployed on an address.

        // e.g. check tx hash on the first call (transaction send)
        if (!myContract.address) {
            console.log("TransactionHash")
            console.log(myContract.transactionHash) // The hash of the transaction, which deploys the contract

            // check address on the second call (contract deployed)
        } else {
            console.log("Contract deployed at :"+myContract.address);
            //console.log(myContract.address) // the contract address
            //exports.contractAddress = myContract.address;
        }

        // Note that the returned "myContractReturned" === "myContract",
        // so the returned "myContractReturned" object will also get the address set.
    }
    else{
      console.log(err);
    }
 });


var MyReceipt = web3.eth.getTransactionReceiptMined(napoleonxcrowdsaleContractInstance.transactionHash);

// Transaction has entered to geth memory pool
console.log("Your contract is being deployed in transaction at http://ropsten.etherscan.io/tx/" + napoleonxcrowdsaleContractInstance.transactionHash);
